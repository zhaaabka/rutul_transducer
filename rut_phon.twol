Alphabet
  а б в г д е ё ж з и й к л м н о п р с т у ф х ц ч ш щ ъ ы ь I э ю я
  %{бы%}:0 %{бы%}:бы
  %{н%}:0 %{н%}:н
  %{д%}:0 %{д%}:д
;

Sets
  vowels = а е ё и о у ы э ю я;
  consonants = б в г д ж з й к л м н п р с т ф х ц ч ш щ ь ъ I;

Rules

"хьибыб --> хьиб"
%{бы%}:0 <=> _ б ;

"сын- and кьуIн- before suffixes beginning with н-"
%{н%}:0 <=> _ н ;

"хьуд- before suffixes beginning with н-"
%{д%}:0 <=> _ н ;